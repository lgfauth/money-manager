# ?? Railway Deploy - Visual Guide

```
????????????????????????????????????????????????????????????????
?          GUIA VISUAL DE DEPLOY NO RAILWAY                   ?
?              MoneyManager - 2 Aplicações                     ?
????????????????????????????????????????????????????????????????
```

## ?? Arquitetura

```
???????????????????????????????????????????????????????????????
?                        USUÁRIO                              ?
???????????????????????????????????????????????????????????????
                     ?
                     ??????????????????????????????????????????
                     ?                 ?                      ?
         ?????????????????????? ????????????????  ???????????????????
         ?   Frontend (Web)   ? ?  API (REST)  ?  ?  MongoDB Atlas  ?
         ?  Blazor WebAssembly? ?  ASP.NET 9   ?  ?   (Database)    ?
         ?                    ? ?              ?  ?                 ?
         ?  Railway Service 1 ? ?Railway Svc 2 ?  ?   Cloud ??      ?
         ?  Port: 8080        ? ?Port: 8080    ?  ?                 ?
         ?????????????????????? ????????????????  ???????????????????
                     ?                 ?                      ?
                     ??????????????????????????????????????????
                               HTTPS (Railway SSL)
```

---

## ??? Fluxo de Deploy

```
???????????????
?  1. GitHub  ?  Código commitado no repositório
???????????????
       ?
       ?
???????????????
? 2. Railway  ?  Detecta mudanças no GitHub
???????????????
       ?
       ????????????????????????????????????????
       ?                  ?                   ?
??????????????   ?????????????????   ????????????????
? Build API  ?   ? Build Web     ?   ? MongoDB      ?
? (Docker)   ?   ? (Docker)      ?   ? (Conecta)    ?
??????????????   ?????????????????   ????????????????
       ?                 ?                   ?
       ?                 ?                   ?
??????????????   ?????????????????   ????????????????
? Deploy API ?   ? Deploy Web    ?   ? Banco Pronto ?
? ? Live ?  ?   ? ? Live ?     ?   ? ?           ?
??????????????   ?????????????????   ????????????????
       ?                 ?
       ?                 ?
???????????????????????????????????????
?      ?? APLICAÇÃO NO AR! ??         ?
???????????????????????????????????????
```

---

## ?? Checklist de 3 Passos

```
??????????????????????????????????????????????????????????
? PASSO 1: MongoDB Atlas (~5 minutos)                   ?
??????????????????????????????????????????????????????????
?                                                        ?
?  ? Criar conta gratuita                               ?
?  ? Criar cluster M0 (Free Tier)                       ?
?  ? Criar usuário de banco                             ?
?  ? Liberar acesso: 0.0.0.0/0                          ?
?  ? Copiar connection string                           ?
?                                                        ?
?  Resultado: mongodb+srv://user:pass@cluster.net/...   ?
??????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????
? PASSO 2: Railway - API (~5 minutos)                   ?
??????????????????????????????????????????????????????????
?                                                        ?
?  ? New Project ? GitHub Repo                          ?
?  ? Selecionar: money-manager                          ?
?  ? Dockerfile Path: Dockerfile.api                    ?
?  ? Configurar variáveis de ambiente                   ?
?  ? Generate Domain                                    ?
?                                                        ?
?  Resultado: https://api.railway.app                   ?
??????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????
? PASSO 3: Railway - Frontend (~5 minutos)              ?
??????????????????????????????????????????????????????????
?                                                        ?
?  ? New Service ? GitHub Repo                          ?
?  ? Selecionar: money-manager                          ?
?  ? Dockerfile Path: Dockerfile.web                    ?
?  ? API_URL = URL da API (passo 2)                     ?
?  ? Generate Domain                                    ?
?                                                        ?
?  Resultado: https://web.railway.app                   ?
??????????????????????????????????????????????????????????

Total: ~15 minutos ??
```

---

## ?? Variáveis de Ambiente

### API (Backend)

```
????????????????????????????????????????????????????????????
? VARIÁVEL                          ? EXEMPLO             ?
????????????????????????????????????????????????????????????
? MONGODB__CONNECTIONSTRING         ? mongodb+srv://...   ?
? MONGODB__DATABASENAME             ? MoneyAgent          ?
? JWT__SECRETKEY                    ? secret-32-chars     ?
? JWT__ISSUER                       ? MoneyManager        ?
? JWT__AUDIENCE                     ? MoneyManagerUsers   ?
? JWT__EXPIRATIONHOURS              ? 24                  ?
? ASPNETCORE_ENVIRONMENT            ? Production          ?
? ASPNETCORE_URLS                   ? http://0.0.0.0:8080 ?
????????????????????????????????????????????????????????????
```

### Frontend (Web)

```
????????????????????????????????????????????????????????????
? VARIÁVEL                          ? EXEMPLO             ?
????????????????????????????????????????????????????????????
? API_URL                           ? https://api.rail... ?
? ASPNETCORE_ENVIRONMENT            ? Production          ?
? ASPNETCORE_URLS                   ? http://0.0.0.0:8080 ?
????????????????????????????????????????????????????????????
```

---

## ?? Estrutura de Arquivos

```
money-manager/
?
??? ?? Dockerfile.api          ? Docker para API
??? ?? Dockerfile.web          ? Docker para Frontend
??? ?? nginx.conf              ? Config Nginx (Frontend)
??? ?? railway.toml            ? Config Railway
??? ?? deploy-railway.sh       ? Script Linux/Mac
??? ?? deploy-railway.bat      ? Script Windows
?
??? ?? docs/
?   ??? RAILWAY_DEPLOYMENT_GUIDE.md     ? Guia completo
?   ??? RAILWAY_QUICK_START.md          ? Início rápido
?   ??? RAILWAY_TROUBLESHOOTING.md      ? Resolução problemas
?   ??? RAILWAY_VISUAL_GUIDE.md         ? Este arquivo
?
??? ?? src/
?   ??? MoneyManager.Presentation/      ? API
?   ?   ??? Program.cs
?   ?   ??? appsettings.json
?   ?   ??? appsettings.Production.json
?   ?
?   ??? MoneyManager.Web/               ? Frontend
?       ??? Program.cs
?       ??? wwwroot/
?
??? ?? .github/
    ??? workflows/
        ??? dotnet-tests.yml            ? CI/CD
```

---

## ?? URLs Finais

Após o deploy completo:

```
???????????????????????????????????????????????????????????
? SERVIÇO      ? URL                                      ?
???????????????????????????????????????????????????????????
? API          ? https://moneymanager-api.up.railway.app ?
? Swagger      ? https://moneymanager-api...app/swagger  ?
? Health Check ? https://moneymanager-api...app/health   ?
? Frontend     ? https://moneymanager-web.up.railway.app ?
???????????????????????????????????????????????????????????
```

---

## ?? Status de Deploy

```
????????????????????????????????????????????????
? ? SUCESSO       ? ?? ERRO      ? ? RODANDO ?
????????????????????????????????????????????????

Build Stages:
[????????????????????????????????] 100%  ? Build completo
[????????????????????????????????] 100%  ? Docker image criada
[????????????????????????????????] 100%  ? Deploy realizado
[????????????????????????????????] 100%  ? Health check OK
[????????????????????????????????] 100%  ? Domain configurado

Status: LIVE ?
```

---

## ?? Custos

```
??????????????????????????????????????????????
? SERVIÇO          ? PLANO    ? CUSTO/MÊS  ?
??????????????????????????????????????????????
? Railway          ? Free     ? $0         ?
? MongoDB Atlas    ? M0       ? $0         ?
??????????????????????????????????????????????
? TOTAL (FREE)                 ? $0/mês ?  ?
??????????????????????????????????????????????

??????????????????????????????????????????????
? SERVIÇO          ? PLANO    ? CUSTO/MÊS  ?
??????????????????????????????????????????????
? Railway          ? Hobby    ? $5         ?
? MongoDB Atlas    ? M2       ? $9         ?
??????????????????????????????????????????????
? TOTAL (PRODUÇÃO)             ? $14/mês    ?
??????????????????????????????????????????????
```

---

## ?? Monitoramento

```
Railway Dashboard:

???????????????????????????????????????????????????
?  API Service                                    ?
???????????????????????????????????????????????????
?  Status:        ? Running                      ?
?  CPU:           ?????? 15%                      ?
?  Memory:        ?????? 120MB                    ?
?  Requests:      ?????? 450 req/min             ?
?  Uptime:        99.9%                           ?
???????????????????????????????????????????????????

???????????????????????????????????????????????????
?  Web Service                                    ?
???????????????????????????????????????????????????
?  Status:        ? Running                      ?
?  CPU:           ?????? 8%                       ?
?  Memory:        ?????? 80MB                     ?
?  Requests:      ?????? 780 req/min             ?
?  Uptime:        99.9%                           ?
???????????????????????????????????????????????????
```

---

## ?? Troubleshooting Flow

```
??????????????????
? Erro no Deploy ?
??????????????????
        ?
        ??? Build falhou?
        ?   ??? Verificar Dockerfile
        ?       ??? Testar localmente
        ?
        ??? App não responde?
        ?   ??? Verificar porta 8080
        ?       ??? Verificar logs
        ?
        ??? MongoDB erro?
        ?   ??? Testar connection string
        ?       ??? Verificar Network Access
        ?
        ??? CORS erro?
        ?   ??? Configurar AllowAll
        ?       ??? Verificar ordem middlewares
        ?
        ??? JWT erro?
            ??? Verificar SecretKey
                ??? Mínimo 32 caracteres
```

---

## ?? Métricas de Sucesso

```
Deploy Bem-Sucedido ?:

? Build time      < 5 minutos
? Health check    Passing (200 OK)
? Memory usage    < 200MB
? CPU usage       < 30%
? Response time   < 500ms
? Error rate      < 1%
? Uptime          > 99%
```

---

## ?? Recursos de Aprendizado

```
???????????????????????????????????????????????????
? NÍVEL        ? RECURSO           ? TEMPO       ?
???????????????????????????????????????????????????
? Iniciante    ? Quick Start       ? 20min       ?
? Intermediário? Deployment Guide  ? 1h          ?
? Avançado     ? Troubleshooting   ? 2h          ?
? Expert       ? Custom Config     ? 4h+         ?
???????????????????????????????????????????????????
```

---

## ? Checklist Final

```
Antes de Deploy:
? MongoDB Atlas configurado
? Connection string testada
? JWT Secret gerado (32+ chars)
? Dockerfiles criados
? Build local funciona

Durante Deploy:
? Projeto criado no Railway
? Variáveis configuradas
? Domínios gerados
? Health checks passando

Após Deploy:
? API acessível
? Frontend carrega
? Login funciona
? Dados salvam no banco
? Logs sem erros
```

---

## ?? Próximos Passos

```
1. ? Deploy básico       (Você está aqui!)
2. ? Domínio customizado
3. ? CI/CD automático
4. ? Monitoramento avançado
5. ? Backups automáticos
6. ? Escalonamento
```

---

```
??????????????????????????????????????????????????????????
?                                                        ?
?   ?? Parabéns! Você está pronto para o deploy! ??     ?
?                                                        ?
?   Siga o Quick Start para começar em 20 minutos       ?
?   ? docs/RAILWAY_QUICK_START.md                       ?
?                                                        ?
??????????????????????????????????????????????????????????
```

---

**Criado por:** Equipe MoneyManager  
**Última atualização:** ${new Date().toLocaleDateString('pt-BR')}  
**Versão:** 1.0.0
